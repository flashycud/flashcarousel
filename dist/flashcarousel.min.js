/*! FlashCarousel - v0.0.1 - 2015-09-01
* https://github.com/flashycud/flashcarousel
* Copyright (c) 2015 Flash <me@flashycud.com>; Licensed MIT */
!function(a,b){"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b():a.FlashCarousel=b()}(this,function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o="flash-carousel",p=o+"--",q=p+"slides",r=p+"slide",s=p+"img-loading",t=p+"nav-left",u=p+"nav-right",v=t+"-arrow",w=u+"-arrow",x=p+"dots",y=p+"dot",z=p+"loading",A=p+"loading-path",B="height-based",C="width-based",D=2;return n={zIndexBase:0,fixHeight:!0,height:200,imgSize:"contain",gap:10},a=function(a,c){a=$(a),a.each(function(){new b($(this),c)})},b=function(a,b){var d=this;d.target=a,d.options={},d.holders=[],d.imgs=void 0,d.loading=void 0,d.pos=[],d.curr=0,d.pages=[],$.extend(d.options,n,b),c.call(d),$(window).load(function(){d.navigateTo(0),i.call(d)})},b.prototype.navigateTo=function(a){var b,c=this.holders.length;if("number"==typeof a&&this.pages.length>0){for(this.pages[this.curr].removeClass("active"),this.curr=0>a?c-1:a>=c?0:a,this.pages[this.curr].addClass("active"),b=0;c>b;b++)this.pos[b]=(this.target.width()+this.options.gap)*(b-this.curr),this.holders[b].css("left",this.pos[b]),this.holders[b].css("z-index",0);this.holders[this.curr].css("z-index",1)}},c=function(){e.call(this),d.call(this),f.call(this),g.call(this),h.call(this)},d=function(){var a,b=this;b.loading=a=$('<svg class="'+z+'" ><path class="'+A+'" d="M43.935,25.145c0-10.318-8.364-18.683-18.683-18.683c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615c8.072,0,14.615,6.543,14.615,14.615H43.935z"></path><svg>'),a.css({zIndex:b.options.zIndexBase,opacity:0}),b.target.append(a)},e=function(){var a,b,c=this;c.target.addClass(o),a=$("<div>").addClass(q),a.css("z-index",c.options.zIndexBase+1),c.imgs=c.target.children(),c.imgs.each(function(d){var e=$(this);e.detach(),b=$("<div>").addClass(r).addClass(s),b.append(e),a.append(b),c.holders.push(b)}),c.target.append(a)},f=function(){var a=$("<div>").addClass(t),b=$("<div>").addClass(u),c=this;a.css("z-index",this.options.zIndexBase+D).append($("<div>Previous</div>").addClass(v)).click(function(){c.navigateTo(c.curr-1)}),b.css("z-index",this.options.zIndexBase+D).append($("<div>Next</div>").addClass(w)).click(function(){c.navigateTo(c.curr+1)}),this.target.append(a).append(b)},g=function(){for(var a,b=$("<div>").addClass(x),c=this,d=0,e=this.holders.length;e>d;d++)a=$("<div>").addClass(y),0==d&&a.addClass("active"),this.pages.push(a),b.append(a);$(this.pages).each(function(a){$(this).click(function(){c.navigateTo(a)})}),b.css("z-index",this.options.zIndexBase+2),this.target.append(b)},h=function(){var a=this;a.options.fixHeight&&a.target.css("height",a.options.height)},i=function(){var a=this;j.call(a),k.call(a)},j=function(){var a=this;a.imgs.one("load",function(){l.call(a,$(this))}).each(function(){this.complete&&$(this).load()})},k=function(){var a=this;a.imgs.each(function(){var b,c=$(this);$(window).resize(function(){a.target.find("."+q).addClass("hide"),a.loading.css("opacity",1),l.call(a,c),a.navigateTo(a.curr),clearTimeout(b),b=setTimeout(function(){a.target.find("."+q).removeClass("hide"),a.loading.css("opacity",0)},300)})})},l=function(a){var b=this,c=a.height()/a.width(),d=b.target.height()/b.target.width();"contain"===b.options.imgSize?d>=c?a.addClass(C).removeClass(B):a.addClass(B).removeClass(C):"cover"===b.options.imgSize&&(d>=c?a.addClass(B).removeClass(C):a.addClass(C).removeClass(B)),a.css("margin-top",-a.height()/2),a.css("margin-left",-a.width()/2),a.parent().removeClass(s)},m=function(){var a=this;a.target.find(q)},a});